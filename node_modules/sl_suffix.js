require("m_");
require("ExpandUtil");
require("date");
require.extensions['.node_'+process.platform+"_"+process.arch] = function(module, filename) {
	return require.extensions['.node'](module, filename);
};

Number.implement({
	toBufUInt64BE: function(){
		var t = this;
		var buf = new Buffer(8);
		buf.writeUInt64BE(t,0,true);
		return buf;
	}
});
if(Buffer.prototype.writeUInt64BE === undefined) {
	Buffer.prototype.writeUInt64BE = function(val,offset,noAssert) {
		var t = this;
		var lw,hw;
		if (val < 0x100000000){
			lw = val;
			hw = 0;
		} else {
			lw = val % 0x100000000;
			hw = Math.floor((val-lw)/0x100000000);
		}
		if(offset === undefined) offset = 0;
		t.writeUInt32BE(lw, offset,noAssert);
		t.writeUInt32BE(hw, offset+4,noAssert);
	};
}
if(Buffer.prototype.readUInt64BE === undefined) {
	Buffer.prototype.readUInt64BE = function(offset,noAssert){
		var t = this;
		if(offset === undefined) offset = 0;
		var val = t.readUInt32BE(offset,noAssert);
		return (val + t.readUInt32BE(offset+4,noAssert) * 0x100000000);
	};
}

