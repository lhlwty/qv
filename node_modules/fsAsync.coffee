fs = require "fs"
path = require "path"
exports.existsAsync = Promise.fromCallback fs.exists,fs
exports.readFileAsync = Promise.fromStandard fs.readFile,fs
exports.readdirAsync = Promise.fromStandard fs.readdir,fs
exports.writeFileAsync = Promise.fromStandard fs.writeFile,fs
exports.appendFileAsync = Promise.fromStandard fs.appendFile,fs
exports.unlinkAsync = Promise.fromStandard fs.unlink,fs
exports.statAsync = Promise.fromStandard fs.stat,fs
exports.rmdirAsync = Promise.fromStandard fs.rmdir,fs

exports.copyFileAsync = (from,to)->
  readable = fs.createReadStream from
  writable = fs.createWriteStream to
  readable.pipe writable
  prm = new Promise (resolve,reject)->
    readable.on "end",->
      resolve()
      return
    return
  prm
exports.moveFileAsync = (from,to)->
  from = path.normalize from
  to = path.normalize to
  return if from is to
  await exports.copyFileAsync from,to
  await exports.unlinkAsync from
  return